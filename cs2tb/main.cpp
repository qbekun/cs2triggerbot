#include "tb.hpp"
#include "offsets.hpp"
#include "nya.hpp"

#include <iostream>
#include <fstream>
#include <thread>

#include <mmsystem.h>
#pragma comment(lib, "Winmm.lib")


int main() {
    SetConsoleTitleA("lolikuza");
    SetConsoleOutputCP(CP_UTF8);

    std::cout << R"(
⠀⠈⢇⠀⢹⡄⠀⠀⠀⢳⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢳⡀⠀⢀⡠⣶⠿⢿⠙⣆⠀⢀⡈⢳⡀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠸⡀⠀⠉⠳⣤⡤⢴⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢈⣿⣶⡿⠋⢁⣠⣾⣿⠿⡇⠀⠳⡄⠘⢦⣄⣀⠀⠀⠀⠀⠀
⠤⠀⠠⠃⠀⠀⠀⠹⠼⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢘⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⢯⣠⣶⠟⠋⠁⢻⠀⢻⡀⠀⢻⣆⠀⠳⡈⠉⠙⠷⠶⠴
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⡄⠀⣻⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⠀⠀⠀⠀⢻⠸⣟⠁⠀⠀⢀⣼⣇⠀⣇⠀⠠⢻⣇⠀⠹⡄⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣴⡿⠋⠁⠀⡿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣸⠀⠀⠀⡄⢸⠀⢸⢠⣠⠶⢻⢭⣿⡀⢹⠀⠀⡉⢟⣇⢰⣽⠖⠦⢤⣀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣀⣴⡿⠛⠉⠀⠀⡀⠀⡇⡇⣀⠀⢠⠀⠀⠀⠀⠀⠀⠀⣽⠀⠀⠀⡇⣸⠀⠸⣿⡅⠀⡼⣼⠀⣷⣾⠀⠀⠙⣾⣿⠟⢸⣀⡀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣧⣞⣿⡷⠋⠀⠀⠀⠀⢴⡇⢰⠀⡇⢿⡔⣸⠀⠀⠀⠀⠀⠀⢰⡿⠀⠀⣰⡇⡟⠀⠀⠏⣧⡶⠃⠇⢰⣿⣏⠀⠀⠀⢈⣻⣄⡿⢦⡀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⡽⢛⠀⠀⠀⠤⡄⢠⣾⣧⢸⣀⣧⣼⣧⣿⡆⠀⠀⠀⢀⣤⡟⡏⢀⣰⢟⡿⠁⠀⠀⢀⣀⣤⣴⣤⣸⣶⣹⡄⠀⠀⠈⠻⡄⠀⠀⠳⣄⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣧⠈⣆⠀⠀⠀⡄⠈⣿⢹⣸⠀⠉⠀⢷⠃⡃⢀⢀⡴⣻⠟⠸⠗⡿⠋⠾⠁⠀⠀⢀⣼⣿⡟⠟⣿⣿⠉⣧⣳⠀⠀⠀⠀⠙⣦⣀⠀⠙⡆
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⣇⢹⡆⠀⠀⢿⡀⣿⠈⣿⠀⠀⠀⠈⠀⠷⢟⠉⠀⠁⠀⠀⠀⠀⠀⠀⠀⠀⢠⣿⠋⣽⣿⠀⣿⡝⠀⢹⣿⡆⠀⠀⠀⠀⢸⣌⡏⠉⠁
⠀⠀⠰⠀⠀⠀⠀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠙⡤⣿⣷⡀⠸⣧⣿⠀⢈⣷⣦⣴⣿⣶⣤⡤⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢾⣿⣿⣿⣿⠀⢟⡇⠀⠘⠓⣇⠀⠀⠀⠀⠘⡟⡾⠀⠀
⠀⠀⠀⠀⠄⠀⠀⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⣿⢿⡝⢦⡏⢻⣤⣾⣿⣿⣿⡛⠉⠉⠛⠛⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢻⣿⣿⡟⠀⣸⠀⠘⢦⠀⢹⢠⠀⠀⢠⣦⠁⠰⠀⠀
⠀⠀⠀⠀⡄⠀⠀⢸⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⢧⡛⠀⢁⣼⣿⣿⠋⣩⣿⣿⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠻⠿⠇⠀⠘⣆⠀⠀⠳⣼⢸⣀⣠⠟⠏⠀⠀⠀⠀
⠀⠀⠀⣰⠃⠀⠀⠀⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢳⣴⣾⣿⣿⣿⣶⣿⡿⠛⢿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⣧⡀⠀⣿⠿⣍⡁⠀⠀⠀⠀⠀⠀
⠀⠀⢰⠏⠀⠀⠀⠀⢸⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠙⢿⣿⣿⣟⠟⠃⠀⢘⣇⣤⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⠃⠀⠁⠀⠀⠉⠓⠦⣄⡀⠀⠀
⠀⣰⠏⠀⠀⠀⠀⠀⠀⢳⠀⠀⠀⠰⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠻⢌⡉⠒⠛⠛⠛⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡼⠀⠑⠦⣀⠀⠀⠀⠀⠀⠀⠉⠓⠦
⣰⡏⠀⠰⠀⠀⠀⠀⠀⠈⢇⠀⠀⠀⠙⢦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⣳⣤⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡜⠀⠀⠀⢠⠞⠀⠀⠀⠀⠀⠙⠳⢤⣄⣀⡀⠀⠀⠀
⢱⠁⠀⢀⠀⠀⠀⠀⠀⠀⠈⢧⡀⠀⠀⠈⠳⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣈⣹⡉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠀⠐⠋⠀⠀⢀⡴⠋⠳⣄⡀⠀⠀⠀⢀⡤⠤⣭⣟⣯⣗⣀⠀
⠈⠀⠀⠈⡆⠀⠀⠀⠀⠀⠀⠈⢳⡔⢆⡀⠀⠈⠳⣤⡀⠀⣀⣠⡴⣖⠒⠋⠉⠈⠙⢦⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⡴⠋⠀⠀⠀⠀⠉⣁⡤⠒⠛⠛⠒⢬⠑⢦⠘⡍⢹
⢀⠆⠀⠀⠃⠀⠀⠀⠀⠀⠀⠀⠈⣾⡦⣽⡲⣄⡀⠀⠉⠙⢧⡀⠈⠉⠛⠶⣦⣀⡀⠀⠈⠓⢤⡶⠶⠶⠶⠖⠒⠊⣿⠿⠿⠿⣷⡶⠖⠾⠟⢋⣉⡁⠀⠀⠀⠀⠀⠀⠑⣌⢑⣾⠗
⠈⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠱⢿⡄⠉⠀⠉⠓⠦⣀⡀⠉⠲⣄⠀⠀⠀⠈⠙⠛⠶⢦⣤⣉⣲⣶⠒⠒⠋⣿⠁⠀⠀⠀⣼⢿⠉⠉⠉⠉⠁⡟⠓⢦⡀⠀⠀⠀⠀⢸⢿⠋⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠨⢿⣆⠀⠀⠀⠀⠈⠙⠳⣤⠈⢓⣦⣀⠀⠀⠀⠀⠀⠈⠙⠓⠩⠿⣒⡤⠿⣆⣚⠛⠉⢷⡞⠀⠀⠀⠀⠈⠀⠀⠀⠙⢄⠀⠀⠀⡀⠄⠀⠀⠀
)" << std::endl;

    UpdateOffsets();

    /*
    std::cout << "dwEntityList      = " << std::hex << dwEntityList << "\n";
    std::cout << "dwLocalPlayerPawn = " << std::hex << dwLocalPlayerPawn << "\n";
    std::cout << "m_iHealth         = " << std::hex << m_iHealth << "\n";
    std::cout << "m_iTeamNum        = " << std::hex << m_iTeamNum << "\n";
    std::cout << "m_iIDEntIndex     = " << std::hex << m_iIDEntIndex << "\n";
    */

    TriggerBot tb;
    if (!tb.initialize()) {
        return 1;
    }

    std::thread([] {
        PlaySoundA((LPCSTR)nya_wav, NULL, SND_MEMORY | SND_ASYNC);
        }).detach();

    tb.run();
    return 0;
}